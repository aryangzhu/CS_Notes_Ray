<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.28.0/themes/prism.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.13.5/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.13.5"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.13.5/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root, jsonOptions) => {
        const markmap = getMarkmap();
        window.mm = markmap.Markmap.create('svg#mindmap', (getOptions || markmap.deriveOptions)(jsonOptions), root);
      })(() => window.markmap,null,{"type":"root","depth":0,"content":"","children":[{"type":"paragraph","depth":1,"payload":{"lines":[0,2]},"content":"基本思想是可以<strong>基于已有的类创建新的类，因为这样做的话(继承)就可以复用已创建的类的方法，而且可以增加一些新的方法和字段，使新类能够适应新的情况</strong><br>\n<strong>反射，反射是指在程序运行期间更多地了解类及其属性的能力</strong>，反射是一个功能强大的特性，也是成为高阶程序员的必经之路"},{"type":"heading","depth":1,"payload":{"lines":[2,3]},"content":"类、超类和子类","children":[{"type":"heading","depth":2,"payload":{"lines":[6,7]},"content":"定义子类","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Manager</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">double</span> bonus<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setBonus</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">double</span> bonus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bonus<span class=\"token operator\">=</span>bonus<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[20,21]},"content":"覆盖方法","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">getSalary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> salary<span class=\"token operator\">+</span>bonus<span class=\"token punctuation\">;</span> <span class=\"token comment\">//won't work</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">getSalary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">double</span> baseSalary<span class=\"token operator\">=</span><span class=\"token function\">getSalary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//still won't work</span>\n    <span class=\"token keyword\">return</span> baseSalary<span class=\"token operator\">+</span>bonus<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">getSalary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">double</span> baseSalary<span class=\"token operator\">=</span><span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">getSalary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> baseSalary<span class=\"token operator\">+</span>bonus<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"type":"heading","depth":3,"payload":{"lines":[49,50]},"content":"方法重写和方法重载的区别","children":[{"type":"heading","depth":4,"payload":{"lines":[59,60]},"content":"为什么重写的子类方法的权限要大于父类方法"}]}]},{"type":"heading","depth":2,"payload":{"lines":[67,68]},"content":"子类构造器","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Manager</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span><span class=\"token keyword\">double</span> salary<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> year<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> month<span class=\"token punctuation\">,</span>itn day<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span>salary<span class=\"token punctuation\">,</span>year<span class=\"token punctuation\">,</span>month<span class=\"token punctuation\">,</span>day<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    bonus<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[87,88]},"content":"继承层次"},{"type":"heading","depth":2,"payload":{"lines":[89,90]},"content":"多态","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Manager</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> managers<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Manager</span><span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//这没什么问题</span>\n<span class=\"token class-name\">Employee</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> staff<span class=\"token operator\">=</span>managers<span class=\"token punctuation\">;</span>   <span class=\"token comment\">// 超类数组指向子类数组引用,多态的体现</span>\nstaff<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Harry Hacker...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//编译器居然也没有识别出问题，如果这里的引用对象进行了修改，那么原对象变量指向的引用也就发生了改变。</span>\nmanagers<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">setBonus</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>将会试图调用一个不存在的实例字段，进而会扰乱相邻存储空间的内容，会引发<span class=\"token class-name\">ArraysStoreException</span>异常。\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[100,101]},"content":"理解方法调用","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Employee</span> <span class=\"token function\">getBuddy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">Manager</span> <span class=\"token function\">getBuddy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">}</span>\n返回类型在子类中发生了改变，是超类的子类型，这两个方法有<span class=\"token operator\">*</span><span class=\"token operator\">*</span>可协变<span class=\"token operator\">*</span><span class=\"token operator\">*</span>的返回类型。\n</code></pre>\n"},{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Employee</span> employee<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Harry Hacker\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">5000</span><span class=\"token punctuation\">,</span><span class=\"token number\">1989</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        employee<span class=\"token punctuation\">.</span><span class=\"token function\">getSalary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[135,136]},"content":"阻止继承:final类和方法"},{"type":"heading","depth":2,"payload":{"lines":[141,142]},"content":"强制类型转换","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">double</span> x<span class=\"token operator\">=</span><span class=\"token number\">3.405</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> nx<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> x<span class=\"token punctuation\">;</span>\n</code></pre>\n"},{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Manager</span> boss<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Manager</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Employee</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> staff<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nstaff<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>boss<span class=\"token punctuation\">;</span>\nstaff<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n"},{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Employee</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> staff<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>staff<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>i为经理<span class=\"token punctuation\">)</span> staff<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">else</span> staff<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nstaff<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Manager</span><span class=\"token punctuation\">)</span>staff<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre>\n"},{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>staff<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Manager</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\nboss<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Manager</span><span class=\"token punctuation\">)</span>staff<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[181,182]},"content":"抽象类","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Person</span> p<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nperson<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nperson<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">sout</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">getDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[200,201]},"content":"受保护访问"}]},{"type":"heading","depth":1,"payload":{"lines":[204,205]},"content":"Object:所有类的超类","children":[{"type":"heading","depth":2,"payload":{"lines":[206,207]},"content":"Oject类型变量"},{"type":"heading","depth":2,"payload":{"lines":[210,211]},"content":"equals方法","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token operator\">==</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>object<span class=\"token operator\">==</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">!=</span>object<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token class-name\">Employee</span> other<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Employee</span><span class=\"token punctuation\">)</span> object<span class=\"token punctuation\">;</span>\n        \n        \n        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>other<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">&amp;&amp;</span>salary<span class=\"token operator\">==</span>other<span class=\"token punctuation\">.</span>salary\n        <span class=\"token operator\">&amp;&amp;</span>hireDay<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>other<span class=\"token punctuation\">.</span>hireDay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[245,246]},"content":"相等测试与继承"},{"type":"heading","depth":2,"payload":{"lines":[259,260]},"content":"hashcode方法","children":[{"type":"heading","depth":3,"payload":{"lines":[269,270]},"content":"常用API","children":[{"type":"heading","depth":4,"payload":{"lines":[271,272]},"content":"java.lang.Object"}]}]},{"type":"heading","depth":2,"payload":{"lines":[293,294]},"content":"toString方法","children":[{"type":"heading","depth":3,"payload":{"lines":[297,298]},"content":"常用API","children":[{"type":"heading","depth":4,"payload":{"lines":[299,300]},"content":"java.lang.Object"}]}]}]},{"type":"heading","depth":1,"payload":{"lines":[305,306]},"content":"泛型数组列表","children":[{"type":"heading","depth":2,"payload":{"lines":[308,309]},"content":"声明数组列表","children":[{"type":"heading","depth":3,"payload":{"lines":[312,313]},"content":"常用API","children":[{"type":"heading","depth":4,"payload":{"lines":[314,315]},"content":"java.util.ArrayList&lt;E&gt;"}]}]},{"type":"heading","depth":2,"payload":{"lines":[323,324]},"content":"访问数组列表元素","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Employee</span> e<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Employee</span><span class=\"token punctuation\">)</span>staff<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">ArrayList</span> list<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//如果需要在数组列表的中间插入元素，为此可以使用方法add方法并提供一个索引参数。</span>\n<span class=\"token keyword\">int</span> n<span class=\"token operator\">=</span>staff<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\nstaff<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n"},{"type":"heading","depth":3,"payload":{"lines":[344,345]},"content":"常用API","children":[{"type":"heading","depth":4,"payload":{"lines":[346,347]},"content":"java.util.ArrayList&lt;E&gt;"}]}]},{"type":"heading","depth":2,"payload":{"lines":[353,354]},"content":"类型化与原始数组的兼容性"}]},{"type":"heading","depth":1,"payload":{"lines":[355,356]},"content":"对象包装器和自动装箱","children":[{"type":"fence","depth":2,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> list<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//将会自动变换成</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer<span class=\"token punctuation\">.</span>ValueOf</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n"},{"type":"heading","depth":2,"payload":{"lines":[368,369]},"content":"常用API","children":[{"type":"heading","depth":3,"payload":{"lines":[369,370]},"content":"java.lang.Integer","children":[{"type":"heading","depth":4,"payload":{"lines":[370,371]},"content":"int intValue()"}]}]}]},{"type":"heading","depth":1,"payload":{"lines":[384,385]},"content":"参数数量和可变的方法"},{"type":"heading","depth":1,"payload":{"lines":[385,386]},"content":"枚举类","children":[{"type":"fence","depth":2,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">enum</span> <span class=\"token class-name\">Size</span><span class=\"token punctuation\">{</span>SMALL<span class=\"token punctuation\">,</span>MEDIUM<span class=\"token punctuation\">,</span>LARGE<span class=\"token punctuation\">,</span>EXTA_LARGE<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"type":"heading","depth":1,"payload":{"lines":[405,406]},"content":"反射","children":[{"type":"heading","depth":2,"payload":{"lines":[412,413]},"content":"Class类","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">String</span> className<span class=\"token operator\">=</span><span class=\"token string\">\"java.util.Random\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Class</span> cl<span class=\"token operator\">=</span><span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n"},{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Class</span> cl1<span class=\"token operator\">=</span><span class=\"token class-name\">Random</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">;</span>\n</code></pre>\n"},{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Class</span> cl<span class=\"token operator\">=</span><span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Object</span> obj<span class=\"token operator\">=</span>cl<span class=\"token punctuation\">.</span><span class=\"token function\">getConstructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">newInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n"},{"type":"heading","depth":3,"payload":{"lines":[450,451]},"content":"常用API","children":[{"type":"heading","depth":4,"payload":{"lines":[451,452]},"content":"java.lang.Class"},{"type":"heading","depth":4,"payload":{"lines":[457,458]},"content":"java.lang.reflect.Constructor"},{"type":"heading","depth":4,"payload":{"lines":[461,462]},"content":"java.lang.Throwable"}]}]},{"type":"heading","depth":2,"payload":{"lines":[465,466]},"content":"声明异常入门","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doSomethingWithClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ReflectOperationException</span><span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Class</span> cl<span class=\"token operator\">=</span><span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">do</span> something cl\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[482,483]},"content":"资源"},{"type":"heading","depth":2,"payload":{"lines":[495,496]},"content":"利用反射分析类的能力","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printMethods</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Class</span> cl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Method</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> methods <span class=\"token operator\">=</span> cl<span class=\"token punctuation\">.</span><span class=\"token function\">getDeclaredMethods</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Method</span> m <span class=\"token operator\">:</span> methods<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Class</span> retType <span class=\"token operator\">=</span> m<span class=\"token punctuation\">.</span><span class=\"token function\">getReturnType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//方法返回类型</span>\n            <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> m<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//方法名</span>\n\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"    \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">String</span> modifiers <span class=\"token operator\">=</span> <span class=\"token class-name\">Modifier</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">.</span><span class=\"token function\">getModifiers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//获取修饰符</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>modifiers<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>modifiers <span class=\"token operator\">+</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>retType<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" \"</span> <span class=\"token operator\">+</span> name<span class=\"token operator\">+</span><span class=\"token string\">\"(\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">//获取方法参数</span>\n            <span class=\"token class-name\">Class</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> paramTypes <span class=\"token operator\">=</span> m<span class=\"token punctuation\">.</span><span class=\"token function\">getParameterTypes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> paramTypes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\", \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>paramTypes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\");\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"type":"heading","depth":3,"payload":{"lines":[536,537]},"content":"常用API","children":[{"type":"heading","depth":4,"payload":{"lines":[538,539]},"content":"java.lang.Class"},{"type":"heading","depth":4,"payload":{"lines":[555,556]},"content":"java.lang.reflect.Constructor"},{"type":"heading","depth":4,"payload":{"lines":[576,577]},"content":"java.lang.reflect.Modifer"}]}]},{"type":"heading","depth":2,"payload":{"lines":[582,583]},"content":"使用反射在运行时分析对象","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">var</span> harry<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Employee</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Harry Hacker\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">50000</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1989</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Class</span> cl<span class=\"token operator\">=</span>harry<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//代表Employee的类对象</span>\n\n<span class=\"token class-name\">Field</span> f<span class=\"token operator\">=</span>cl<span class=\"token punctuation\">.</span><span class=\"token function\">getDeclaredField</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//f是Employee下name的字段对象</span>\n\n<span class=\"token class-name\">Object</span> v<span class=\"token operator\">=</span>f<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>harry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//harry是obj,v的值应该是“Harry Hacker“</span>\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[603,604]},"content":"使用反射编写泛型数组代码"},{"type":"heading","depth":2,"payload":{"lines":[607,608]},"content":"调用任意方法和构造器","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">String</span> n<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span>m1<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>harry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n"},{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">double</span> salary<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Double</span><span class=\"token punctuation\">)</span>m2<span class=\"token punctuation\">.</span><span class=\"token function\">getSalary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n"}]}]},{"type":"heading","depth":1,"payload":{"lines":[628,629]},"content":"继承设计的技巧","children":[{"type":"heading","depth":2,"payload":{"lines":[630,631]},"content":"1.将公共操作放在超类中。"},{"type":"heading","depth":2,"payload":{"lines":[632,633]},"content":"2.不要使用受保护的字段"},{"type":"heading","depth":2,"payload":{"lines":[640,641]},"content":"3.思考继承有没有被滥用"},{"type":"heading","depth":2,"payload":{"lines":[644,645]},"content":"4.除非继承的方法有意义，否则不要继承。"},{"type":"heading","depth":2,"payload":{"lines":[650,651]},"content":"5.在覆盖方法时，不要更改预期的行为。"},{"type":"heading","depth":2,"payload":{"lines":[652,653]},"content":"6.使用多态，而不要使用类型信息。","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>s is of type <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n<span class=\"token function\">acition</span><span class=\"token punctuation\">(</span>x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>x is of type <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">action</span><span class=\"token punctuation\">(</span>x2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]}]}],"payload":{}},{})</script>
</body>
</html>
